\subsection{CountermeasureNode}
\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private constraint\_handler: ConstraintHandler }
		the handler for all constraints
	\item \textit{ private rated\_statistic\_storage: RatedStatisticStorage }
		the storage of all incoming rated statistic
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public \_\_mai\_\_() }
		periodically evaluates the constraints and cleans old statistics
	\item \textit{ private registerSubscriber() }
		registers to the rated statistics
\end{itemize}



\subsection{ConstraintHandler}
\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private  Constraint constraint[] }
		contains a list of all constraints
	\item \textit{ private  RatedStatisticStorage rated\_statistic\_storage }
		contains all incoming rated statistic
	\item \textit{ private  int reaction\_autonomy\_level }
		only reactions with an autonomy\_level <= reaction\_autonomy\_level get executed
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public addConstraint(Constraint)  }
		adds an constraint to this list
	\item \textit{ public setStatistic(RatedStatisticStorage)  }
		sets the Statistic to use. Should only be needed on initialisation
	\item \textit{ public evaluateConstraints()  }
		evaluates every constraint
	\item \textit{ public executeReactions()  }
		checks if there are any new reactions to do and executes them.
	\item \textit{ private reactToConstraint(Constraint)  }
		executes an single Reaction and updates the attributes of the Constraint
	\item \textit{ private readParamConstraints()  }
		reads all constraints from the parameter server
	\item \textit{ private readParamReactionAutonomyLevel()  }
		reads the reaction\_autonomy\_level from the parameter server
\end{itemize}


\subsection{RatedStatisticStorage}
A database which contains the current state of all rated statistics.
\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private statistic\_dict: dict\{seuid: string - dict\{statistic\_type: string - tuple\{outcome: Outcome, timestamp: date.timestamp\}\}\}  }
		a dictionary containing all rated statistic information with their outcome and an timestamp when they got added / updated to the dictionary.
	\item \textit{ private timeout: int }
		the timeout after which an item in ratedstatistic is declared too old and should be removed from the dict.
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public clean\_old\_statistic() }
		checks the complete dictionary for statistics older than timeout seconds and removes them.
	\item \textit{ public callback\_rated\_statistic(msg: RatedStatistics) }
		callback for incoming rated statistics. adds them to the dictionary or removes items from the dictionary if the rated statistic says that its within bounds again. 
	\item \textit{ public Outcome get\_outcome(seuid: string, statistic\_type: string) }
		returns the outcome of the specific seuid and statistic\_type.
\end{itemize}

\subsection{Constraint }
TODO: Description


\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private  ConstraintItem constraint }
	first constraint in the chain of ConstraintItems.
	\item \textit{ private  int true\_since }
	epoch time in milliseconds since the constraint is true,
	if the constraint is not true it is 0
	\item \textit{ private  Reaction[] planned\_reaction }
	an array of reactions that should be executed if the constraint has been true longer than min\_reaction\_interval milliseconds
	\item \textit{ private  int min\_reaction\_interval }
	the minimum time needed in ms that the constraint needs to be true to execute the planned\_reaction
	\item \textit{ private  int last\_reaction }
	contains the epoch time in ms when the reaction corresponding to this constraint has been executed for the last time.
		is 0 if it has never been executed
	\item \textit{ private  int reaction\_timeout }
	minimum durotation in ms needed before an reaction can happen again
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public evaluateConstraint(RatedStatisticStorage)  }
	evaluates this constraint and sets the attributes according to the result of the evaluation
\end{itemize}



\subsection{ConstraintItem}
	Abstract description of a Constraint, can be an logical operation on constraints or an actual constraint
\subsubsection{Attributes}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public abstract boolean evaluateConstraint(RatedStatisticStorage) }
	evaluates if this constraint, given the available RatedStatisticStorage, is true. 
\end{itemize}		


\subsection{ConstraintLeaf }
Contains an actual constraint.

\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private  string name }
	contains the name of the statistic data
	\item \textit{ private  Outcome outcome }
	contains the outcome needed for this constraint to be true
	\item \textit{ private  string seuid }
	contains the unique identifier of the corresponding StatisticEntity
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public abstract boolean evaluateConstraint(RatedStatisticStorage) }
	returns true if this constrain is true for the RatedStatisticStorage
\end{itemize}


\subsection{ConstraintAnd }
TODO: Description

\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private  Constraint constraint[] }
	contains constraints to be evaluated with a logical and	
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public boolean evaluateConstraint(RatedStatisticStorage) }
	returns true if the evaluation of both constains returns true
\end{itemize}


\subsection{ConstraintOr }
TODO: Description

\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private Constraint constraint[] }
	contains constraints to be evaluated with an logical or
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public boolean evaluateConstraint(RatedStatisticStorage) }
	returns true if the evaluation of at least one constraint returns true
\end{itemize}


\subsection{ConstraintNot }
TODO: Description

\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private constraint: Constraint }
	the constraint to be evaluated negated
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public boolean evaluateConstraint(RatedStatisticStorage) }
	returns true if the evaluation of the constraint returns false
\end{itemize}

\subsection{Enum Outcome }
TODO: Description

\subsubsection{Types}
\begin{itemize}
	\item \textit{ high }
	data value is too high
	\item \textit{ low }
	data value is too low
	\item \textit{ unknown }
	data value is unknown
	\item \textit{ out\_of\_bounds }
	data value is either too high or too low
\end{itemize}


\subsection{Reaction}
	Abstract Reaction to an Constraint
\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ host\_id: string  }
		contains the host on which the node is run on.
	\item \textit{ node\_id: string  }
		the id of the node the reaction is ment to act upon.
	\item \textit{ private  int autonomy\_level }
		this constraint only gets evaluatet if 
		the autonomy\_level is <= reaction\_autonomy\_level
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item public \_\_init\_\_(node\_id: string)
		initializes the reaction. sets the node to execute the reaction on. finds the corresponding host to the given node.
	\item \textit{ public executeReaction() }
		executes the reaction as a service call to the HostStatistic Node.
\end{itemize}


\subsection{ReactionRun}
	An Reaction which runs a command as action 
\subsubsection{Attributes}
\begin{itemize}
	\item private string[] command\_args
	\\ contains the command as first entry, and its arguments as the next entries
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item public \_\_init\_\_(node\_id: string, command\_args: string[])
		initializes the reaction. set the command and its arguments to be executed.
	\item \textit{ public executeReaction() }
	\item \textit{ private parseArguments() }
		parses the command\_args and changes placeholders to actual values. this method should be called only at initialization
	\item 
\end{itemize}


\subsection{ReactionDefault}
\subsubsection{attributes}
\begin{itemize}
	\item \textit{ protected reactionType: ReactionDefaultType }
		containts the type this reaction is of.
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public \_\_init\_\_(node\_id: string, reactionType: string) }
		initializes the reaction. sets the reactiontype of this reaction.
	\item \textit{ public exececuteReaction() }
	\item \textit{ private restartNode() }
		restarts the Node
	\item \textit{ private stopNode() }
		stops the Node
	\item \textit{ private publishOnRosout(verbosity: string) }
		publishes the cause of the reaction on rosout. publishes with the specified verbosity level 
\end{itemize}


\subsection{Enum ReactionDefaultType}
\subsubsection{Types}
\begin{itemize}
	\item \textit{ restart }
		reaction is a restart of an entity
	\item \textit{ stop }
		reaction is stopping an entity
	\item \textit{ output }
		reaction is publishing the reaction on rosout
\end{itemize}


\subsection{HostLookUp}
Singleton. Contains a dictionary of all nodes which are on an host who has an HostStatisticNode running and the hosts they run on.
\subsubsection{Attributes}
\begin{itemize}
	\item \textit{ private node\_dict: dict\{node: string - host: string\}  }
		Contains all nodes which are on an host who has an HostStatisticNode running. Host is the host the node runs on.
	\item \textit{ static HostLookUp: instance }
		the singleton instance
\end{itemize}
\subsubsection{Methods}
\begin{itemize}
	\item \textit{ public string get\_host(node: string) }
		returns the host the node runs on
	\item \textit{ public add\_node(node: string, host: string) }
		adds an node - host tuple to the dictionary
	\item \textit{ get\_node\_list(host\_id: string) }
		returns all nodes of a specifid host
	\item \textit{ public remove\_node(node: string) }
		removes an node from the dictionary
	\item \textit{ public static HostLookUp get\_instance() }
		returns the instance of HostLookUp
\end{itemize}